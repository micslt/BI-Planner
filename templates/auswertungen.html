{% include "header.html" %}

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.4.0/jspdf.umd.min.js"></script>

<div class="container">
    <div class="progress">
        <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" style="width:100%;" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100">100%</div>
    </div>
</div>
<br>
<div class="container">
    <h4 class="rahmen">Auswertungen</h4>    <br>
</div>


<div class="container">
    <h6><label>Standortbestimmung:</label></h6>
    {% if results %}
    <table class="table">
        <thead>
            <tr>
                <th>Organisation</th>
                <th>Ressourcen</th>
                <th>Dateninfrastruktur</th>
                <th>Analytik</th>
                <th>Governance</th>
                <th>Total</th>
            </tr>
        </thead>
        <tbody>
            {% for row in results %}
            <tr>
                <td>
                    <div class="progress">
                        <div class="progress-bar" role="progressbar" style="width: {{ row[1] }}%;" aria-valuenow="{{ row[1] }}" aria-valuemin="0" aria-valuemax="100">{{ row[1] }}%</div>
                    </div>
                </td>
                <td>
                    <div class="progress">
                        <div class="progress-bar" role="progressbar" style="width: {{ row[2] }}%;" aria-valuenow="{{ row[2] }}" aria-valuemin="0" aria-valuemax="100">{{ row[2] }}%</div>
                    </div>
                </td>
                <td>
                    <div class="progress">
                        <div class="progress-bar" role="progressbar" style="width: {{ row[3] }}%;" aria-valuenow="{{ row[3] }}" aria-valuemin="0" aria-valuemax="100">{{ row[3] }}%</div>
                    </div>
                </td>
                <td>
                    <div class="progress">
                        <div class="progress-bar" role="progressbar" style="width: {{ row[4] }}%;" aria-valuenow="{{ row[4] }}" aria-valuemin="0" aria-valuemax="100">{{ row[4] }}%</div>
                    </div>
                </td>
                <td>
                    <div class="progress">
                        <div class="progress-bar" role="progressbar" style="width: {{ row[5] }}%;" aria-valuenow="{{ row[5] }}" aria-valuemin="0" aria-valuemax="100">{{ row[5] }}%</div>
                    </div>
                </td>
                <td>
                    <div class="progress">
                        <div class="progress-bar" role="progressbar" style="width: {{ row[6] }}%;" aria-valuenow="{{ row[6] }}" aria-valuemin="0" aria-valuemax="100">{{ row[6] }}%</div>
                    </div>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <p>Keine Daten gefunden.</p>
    {% endif %}

    <br>
    <h6><label>Rahmenbedingungen</label></h6>
    <div class="table-container" style="display: inline-block;">
        <table class="table table-striped table-hover">
            <thead>
                <tr>
                    <th>IT-Betrieb</th>
                    <th>BI-Aufbau</th>
                    <th>Ressourcen vorhanden</th>
                    <th>Know-how vorhanden</th>
                    <th>finanzieller Bedarf</th>
                    <th>finanzielle Mittel sichergestellt</th>
                    <th>Personendaten</th>
                    <th>gesetzeskonforme Bearbeitung</th>
                    <th>Gesetze</th>
                </tr>
            </thead>
            <tbody>
                {% for nummer, rahmenbedingung in rahmenbedingungen %}
                <tr>
                    <td>{{ rahmenbedingung[0] }}</td>
                    <td>{{ rahmenbedingung[1] }}</td>
                    <td>{{ rahmenbedingung[2] }}</td>
                    <td>{{ rahmenbedingung[3] }}</td>
                    <td>{{ rahmenbedingung[4] }}</td>
                    <td>{{ rahmenbedingung[5] }}</td>
                    <td>{{ rahmenbedingung[6] }}</td>
                    <td>{{ rahmenbedingung[7] }}</td>
                    <td>{{ rahmenbedingung[8] }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <br>
    <h6><label>Unternehmensziele</label></h6>
    <div class="table-container" style="display: inline-block;">
                <table class="table table-striped table-hover">
                    <thead>
                        <tr>
                            <th>Nr.</th>
                            <th>Ziel</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for nummer, ziel in ziele %}
                        <tr>
                            <td>{{ nummer }}</td>
                            <td>{{ ziel }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
    <br>
    <h6><label>Informationsbedarf</label></h6>
    <div class="table-container" style="display: inline-block;">
            <table class="table table-striped table-hover">
                <thead>
                    <tr>
                        <th>Nr.</th>
                        <th>Bezeichnung</th>
                        <th>Informationsbedarf</th>
                        <th>Priorit채t</th>

                    </tr>
                </thead>
                <tbody>
                    {% for nummer, informationsbedarf in informationsbedarf_liste %}
                    <tr>
                        <td>{{ nummer }}</td>
                        <td>{{ informationsbedarf[0] }}</td>
                        <td>{{ informationsbedarf[1] }}</td>
                        <td>{{ informationsbedarf[2] }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    <h6><label>Datenquellen</label></h6>
    <div class="table-container" style="display: inline-block;">
        <table class="table table-striped table-hover">
            <thead>
                <tr>
                    <th>Nr.</th>
                    <th>Anwendung</th>
                    <th>Inhalt</th>
                </tr>
            </thead>
            <tbody>
                {% for nummer, datenquelle in datenquellen %}
                <tr>
                    <td>{{ nummer }}</td>
                    <td>{{ datenquelle[0] }}</td>
                    <td>{{ datenquelle[1] }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <h6><label>Datenmanagementkonzept</label></h6>
        <div class="table-container" style="display: inline-block;">
        <table class="table table-striped table-hover">
            <thead>
                <tr>
                    <th>Nummer</th>
                    <th>Konzeption</th>
                    <th>Architektur</th>
                    <th>Applikation(en)</th>
                </tr>
            </thead>
            <tbody>
                {% for nummer, datenmanagement in datenmanagementkonzept %}
                <tr>
                    <td>{{ nummer }}</td>
                    <td>{{ datenmanagement[0] }}</td>
                    <td>{{ datenmanagement[1] }}</td>
                    <td>{{ datenmanagement[2] }}</td>
                 </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>


    <h6><label>ETL-Prozesse</label></h6><br>

    <h6><label>Analysen</label></h6>
        <div class="table-container" style="display: inline-block;">
        <table class="table table-striped table-hover">
            <thead>
                <tr>
                    <th>Nr.</th>
                    <th>Informationsbedarf</th>
                    <th>Beschreibung</th>
                    <th>Berechnung</th>
                    <th>Darstellungsart</th>
                </tr>
            </thead>
            <tbody>
                {% for nummer, analyse in analysen %}
                <tr>
                    <td>{{ nummer }}</td>
                    <td>{{ analyse[0] }}</td>
                    <td>{{ analyse[1] }}</td>
                    <td>{{ analyse[2] }}</td>
                    <td>{{ analyse[3] }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <h6><label>Dashboards und Berichte</label></h6>
            <div class="table-container" style="display: inline-block;">
        <table class="table table-striped table-hover">
            <thead>
                <tr>
                    <th>Nummer</th>
                    <th>Bezeichnung</th>
                    <th>Art</th>
                    <th>Empf채nger</th>
                    <th>beinhaltete Messungen</th>
                </tr>
            </thead>
            <tbody>
                {% for nummer, information in informationsbereitstellung %}
                <tr>
                    <td>{{ nummer }}</td>
                    <td>{{ information[0] }}</td>
                    <td>{{ information[1] }}</td>
                    <td>{{ information[2] }}</td>
                    <td>{{ information[3] }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <h6><label>Qualit채tskontrollen Visualisierungen und Dashboards</label></h6><br>
</div>


<br>
<div class="text-center">
    <a href="/dashboard" class="btn btn-secondary">Zur체ck</a>
    <button onclick="window.print()" class="btn btn-warning">Drucken</button>
    <a href="/feedback" class="btn btn-primary">Feedback geben</a>
</div>

<script>
    function submitForm() {
        document.getElementById("selectForm").submit();
    }

  function saveAsPDF() {
    const doc = new jsPDF();
    const html = document.querySelector('html');

    doc.html(html, {
      callback: function () {
        doc.save('output.pdf');
      }
    });
  }
</script>


{% include "footer.html" %}
